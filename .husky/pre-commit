#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Check if we're in frontend or backend directory
if [[ $PWD == *"/frontend"* ]]; then
  echo "ğŸ“¦ Frontend checks..."
  npm run lint
  npm run type-check
  npm run format:check
elif [[ $PWD == *"/backend"* ]]; then
  echo "ğŸ–¥ï¸  Backend checks..."
  npm run lint
  npm run type-check
  npm run format:check
else
  echo "ğŸ” Full project checks..."

  # Frontend checks
  echo "ğŸ“¦ Checking frontend..."
  cd frontend
  npm run lint
  npm run type-check
  npm run format:check
  cd ..

  # Backend checks
  echo "ğŸ–¥ï¸  Checking backend..."
  cd backend
  npm run lint
  npm run type-check
  npm run format:check
  cd ..
fi

echo "âœ… All checks passed!"