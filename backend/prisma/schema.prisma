// Prisma schema for TCBA coalition management platform
// Run npx prisma generate after changes to update types and regenerate client and model

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// Organization permission levels for coalition platform
enum OrganizationRole {
  SUPER_ADMIN  // Full system access (TCBA staff)
  ADMIN        // Coalition management access
  MEMBER       // Standard nonprofit member
}

// Organization account states
enum OrganizationStatus {
  ACTIVE       // Can use platform
  INACTIVE     // Temporarily disabled
  PENDING      // Waiting for setup completion
  SUSPENDED    // Admin blocked access
}

// The 45+ nonprofit organizations that are part of the Tennessee Coalition for Better Aging
// Can discuss splitting up this model into addresses table and org table for db normalization standards later
model Organization {
  id              String             @id @default(cuid())
  firebaseUid     String             @unique // Links to Firebase Auth
  name            String             @unique
  email           String             @unique // Primary contact email
  description     String?
  website         String?
  address         String?
  city            String?
  state           String?
  zipCode         String?
  phoneNumber     String?
  contactPerson   String?            // Primary contact name
  contactTitle    String?            // Title of primary contact
  role            OrganizationRole   @default(MEMBER)
  status          OrganizationStatus @default(PENDING)
  tags            String[]           // Location/focus tags like ["West Tennessee", "Healthcare", "Senior Services"]

  @@map("organizations")
}